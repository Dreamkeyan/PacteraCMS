<include file="Public/headerManage"/>
<style>
    .plupload-pick .webuploader-pick {
        background-color: #fff;
        width: 80px;
        height: 80px;
        z-index: -1;
    }
</style>
<div class="wrapper wrapper-content">
    <div class="row">
        <div class="col-sm-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <label>商品详情</label>
                    <button type="button" id="save-form" class="btn btn-warning pull-right">保存</button>
                </div>
                <div class="ibox-content ho">
                    <div class="clearfix">
                        <div class="tab-group ho" id="j-tab">
                            <a href="#tab1" class="cur">通用信息</a>
                            <a href="#tab2">商品相册</a>
                            <a href="#tab3">商品模型</a>
                        </div>
                        <div class="tabs ho">
                            <form id="goods-form" action="{:U('save')}" class="form-horizontal">
                                <notempty name="data">
                                    <input type="hidden" name="id" value="{$data.id}">
                                </notempty>
                                <div id="tab1" class="tab active" style="max-width: 1000px;">
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">店铺：</label>
                                        <div class="col-sm-6">
                                            <select name="shop_id" class="form-control" required>
                                                <option value="">请选择</option>
                                                <foreach name="shops" item="vo" key="k">
                                                    <eq name="k" value="$data.shop_id">
                                                        <option value="{$k}" selected="selected">{$vo}</option>
                                                        <else/>
                                                        <option value="{$k}">{$vo}</option>
                                                    </eq>
                                                </foreach>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">商品名称：</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" name="name" value="{$data.name}"
                                                   required>
                                        </div>
                                    </div>
                                    <div id="goods-cates" class="form-group">
                                        <label class="col-sm-2 control-label">商品分类：</label>
                                        <div class="col-xs-3">
                                            <select class="cate-select form-control" name="cate1" required>
                                                <option value="">请选择商品分类</option>
                                                <foreach name="cates" item="vo" key="k">
                                                    <eq name="vo.pid" value="0">
                                                        <option value="{$k}">{$vo.name}</option>
                                                    </eq>
                                                </foreach>
                                            </select>
                                        </div>
                                        <div class="col-xs-3">
                                            <select class="cate-select form-control" name="cate2">
                                                <option value="">请选择商品分类</option>
                                            </select>
                                        </div>
                                        <div class="col-xs-3">
                                            <select class="cate-select form-control" name="cate3">
                                                <option value="">请选择商品分类</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">商品品牌：</label>
                                        <div class="col-sm-6">
                                            <select class="form-control" name="brand_id" required>
                                                <option value="">请选择</option>
                                                <foreach name="brand" item="vo" key="k">
                                                    <eq name="k" value="$data.brand_id">
                                                        <option value="{$k}" selected="selected">{$vo}</option>
                                                        <else/>
                                                        <option value="{$k}">{$vo}</option>
                                                    </eq>
                                                </foreach>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">本店售价：</label>
                                        <div class="col-sm-3">
                                            <input type="text" class="form-control text-right" name="sale_price"
                                                   placeholder="0.00" required value="{$data.sale_price}">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">市场价：</label>
                                        <div class="col-sm-3">
                                            <input type="text" class="form-control text-right" name="market_price"
                                                   placeholder="0.00" required value="{$data.market_price}">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">进货价：</label>
                                        <div class="col-sm-3">
                                            <input type="text" class="form-control text-right" name="stock_price"
                                                   placeholder="0.00" required value="{$data.stock_price}">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">商品重量：</label>
                                        <div class="col-sm-3">
                                            <input type="text" class="form-control text-right" name="weight"
                                                   placeholder="KG" required value="{$data.weight}">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">配送方式：</label>
                                        <div class="col-sm-9">
                                            <div class="radio radio-inline">
                                                <label>
                                                    <empty name="data">
                                                        <input type="radio" name="deliver_type" checked value="1">自提
                                                        <else/>
                                                        <input type="radio" name="deliver_type" value="1"
                                                        <eq name="data.deliver_type" value="1">checked</eq>
                                                        >自提
                                                    </empty>
                                                </label>
                                            </div>
                                            <div class="radio radio-inline">
                                                <label>
                                                    <input type="radio" name="deliver_type" value="2"
                                                    <eq name="data.deliver_type" value="2">checked</eq>
                                                    >送货上门
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">是否推荐：</label>
                                        <div class="col-sm-9">
                                            <div class="radio radio-inline">
                                                <label>
                                                    <empty name="data">
                                                        <input type="radio" name="is_push" checked value="1">推荐
                                                        <else/>
                                                        <input type="radio" name="is_push" checked value="1"
                                                        <eq name="data.is_push" value="1">checked</eq>
                                                        >推荐
                                                    </empty>
                                                </label>
                                            </div>
                                            <div class="radio radio-inline">
                                                <label>
                                                    <input type="radio" name="is_push" value="0"
                                                    <eq name="data.is_push" value="0">checked</eq>
                                                    >不推荐
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">是否上架：</label>
                                        <div class="col-sm-9">
                                            <div class="radio radio-inline">
                                                <label>
                                                    <empty name="data">
                                                        <input type="radio" name="is_putaway" checked value="1">上架
                                                        <else/>
                                                        <input type="radio" name="is_putaway" checked value="1"
                                                        <eq name="data.is_putaway" value="1">checked</eq>
                                                        >上架
                                                    </empty>
                                                </label>
                                            </div>
                                            <div class="radio radio-inline">
                                                <label>
                                                    <input type="radio" name="is_putaway" value="0"
                                                    <eq name="data.is_putaway" value="0">checked</eq>
                                                    >下架
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">库存数量：</label>
                                        <div class="col-sm-3">
                                            <input type="text" class="form-control text-right" name="store_count"
                                                   placeholder="0" required value="{$data.store_count}">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">商品关键词：</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" name="keywords"
                                                   value="{$data.keywords}">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">商品详细描述：</label>
                                        <div class="col-sm-9">
                                            <script type="text/plain" id="editor"
                                                    style="width:100%;height:300px;margin-top:12px;">{$data.desc|htmlspecialchars_decode}
                                            </script>
                                        </div>
                                    </div>
                                </div>
                                <div id="tab2" class="tab">
                                    <div class="form-group">
                                        <div class="col-sm-10">
                                            <p>商品主图大小不能超过3MB；700*700 以上图片上传后宝贝详情页自动提供放大镜功能。</p>
                                            <div id="img1" class="plupload-pick"></div>
                                            <div id="img2" class="plupload-pick"></div>
                                            <div id="img3" class="plupload-pick"></div>
                                            <div id="img4" class="plupload-pick"></div>
                                            <div id="img5" class="plupload-pick"></div>
                                            <div class="upload-result">
                                                <label>上传结果：</label>
                                                <for start="1" end="6">
                                                    <img id="show-img{$i}" url="{:U('uploadFile')}"
                                                         src="__LOCAL_ASSET__/Mall/Admin/images/bg.png">
                                                </for>
                                            </div>
                                            <for start="1" end="6">
                                                <input type="hidden" id="data-img{$i}" name="thumb_img[]"/>
                                            </for>
                                        </div>
                                    </div>
                                </div>
                                <div id="tab3" class="tab">
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">商品模型：</label>
                                        <div class="col-sm-6">
                                            <select id="Pro-model" name="model_id" class="form-control">
                                                <option value="">选择商品模型</option>
                                                <foreach name="types" item="vo" key="k">
                                                    <option value="{$k}">{$vo}</option>
                                                </foreach>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-8">
                                            <div class="panel panel-default">
                                                <div class="panel-heading">商品规格</div>
                                                <table id="spec-table" class="table"></table>
                                            </div>
                                            <div id="specs-table"></div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="panel panel-default">
                                                <div class="panel-heading">商品属性</div>
                                                <table id="attr-table" class="table"></table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<input type="hidden" id="listUrl" value="{:U('index')}"/>
<input type="hidden" id="cates" value='{$cates|json_encode}'/>
<input type="hidden" id="data" value='{$data|json_encode}'/>
<input type="hidden" id="getSpecAttr" value="{:U('getSpecAttr')}"/>
<input type="hidden" id="getSpecTable" value="{:U('getSpecTable')}"/>
<include file="Public/footerManage"/>
<block name="script">
    <link rel="stylesheet" type="text/css" href="__ASSET__/Common/Admin/plugins/webuploader-0.1.5/webuploader.css">
    <script src="__ASSET__/Common/Admin/plugins/webuploader-0.1.5/webuploader.js"></script>
    <script src="__ASSET__/Common/Admin/plugins/ueditor1_4_3_3-utf8-php/ueditor.config.js"></script>
    <script src="__ASSET__/Common/Admin/plugins/ueditor1_4_3_3-utf8-php/ueditor.all.min.js"></script>
    <script src="__ASSET__/Common/Admin/plugins/ueditor1_4_3_3-utf8-php/lang/zh-cn/zh-cn.js"></script>
    <script src="__LOCAL_ASSET__/Mall/Admin/js/uploadFile.js"></script>
    <script src="__LOCAL_ASSET__/Mall/Admin/js/goods.js"></script>
    <script>
        $(function () {
            /*tab切换*/
            mall.tab_init();
            /*UE*/
            mall.initialize_ue_func("editor");
            // 初始化上传图片
            uploaderImg('#img1', '#show-img1', '#data-img1', '50', '50', true);
            uploaderImg('#img2', '#show-img2', '#data-img2', '50', '50', true);
            uploaderImg('#img3', '#show-img3', '#data-img3', '50', '50', true);
            uploaderImg('#img4', '#show-img4', '#data-img4', '50', '50', true);
            uploaderImg('#img5', '#show-img5', '#data-img5', '50', '50', true);
        });
    </script>
</block>